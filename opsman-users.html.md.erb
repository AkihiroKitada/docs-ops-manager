---
title: Creating and Managing Ops Manager User and Client Accounts
---

<strong><%= modified_date %></strong>

This topic describes how to add and remove Ops Manager users. It also descibes how you can
use an admin Ops Manager account to create client accounts that you can use for Ops
Manager automation.

## <a id="about-om-users"></a> Overview 

Pivotal Cloud Foundry supports multiple user accounts in Ops Manager. A User Account and Authentication (UAA) module co-located on the Ops Manager VM manages access permissions to Ops Manager.

When Ops Manager boots for the first time, you create an admin user. However, you do not create additional users through the Ops Manager web interface. If you want to create additional users who can log into Ops Manager, you must use the UAA API, either through `curl` or the UAA Command Line Client (UAAC).

Users are not the only type of account you can create for Ops Manager. You can also create client accounts, which connect automation tools and scripts to Ops Manager. Pivotal recommends using clients to handle automated tasks.

A user account can configure automated components, but client accounts are not bound to authentication protocols the way imported or new user accounts can be. A user account that controls automated components can cause those components to fail if the account experiences inconsistent availability due to permission or authentication issues.

You can create client accounts after deploying Ops Manager, or during configuration for an initial deployment. For more information about adding clients during initial configuration or after deployment, see [Add Pre-Created Clients](#pre-created-clients).

## <a id='add-user'></a>Add Ops Manager Users

Follow these steps to add or remove users with UAAC. If you do not already have the UAAC installed, run `gem install cf-uaac` on the command line.

<p class="note"><strong>Note:</strong> You can only manage users on the Ops Manager UAA module if you chose to use Internal Authentication instead of an external Identity Provider when configuring Ops Manager.</p>

To add Ops Manager users, do the following:

1. Target your Ops Manager UAA:
<pre class='terminal'>$ uaac target <span>https</span>://YOUR-OPSMANAGER-FQDN/uaa/</pre>
 Where:
 * `YOUR-OPSMANAGER-FQDN` is the fully qualified domain name of your Ops Manager installation.
1. Get your token:
<pre class='terminal'>$ uaac token owner get
  Client ID: opsman
  Client Secret: [Press Enter]
  Username: Admin
  Password: *******
  &nbsp;
  Successfully fetched token via client credentials grant.
  Target <span>https</span>://YOUR-OPSMANAGER-FQDN/uaa/
</pre>
 Where:
 * `YOUR-OPSMANAGER-FQDN` is the fully qualified domain name of your Ops Manager installation.
1. Add a user.
<pre class="terminal">$ uaac user add USER-NAME -p USER-PASSWORD --emails USER-EMAIL<span>@</span>EXAMPLE.COM</pre>
 Where: 
 * `USER-NAME` is the username of the user you are adding.
 * `USER-PASSWORD` is the password with which this user authenticates.
 * `USER-EMAIL` is the email address associated with this user.
1. (Optional) Set the Role-Based Access Control (RBAC) permissions for your user. For more information, see [Configuring Role-Based Access Control (RBAC) in Ops Manager](../opsguide/config-rbac.html).

## <a id='remove-user'></a>Remove Ops Manager Users

To remove Ops Manager users, do the following:

1. Target your Ops Manager UAA:
<pre class='terminal'>$ uaac target <span>https</span>://YOUR-OPSMANAGER-FQDN/uaa/</pre>
1. Get your token:
<pre class='terminal'>
  $ uaac token owner get
  Client ID: opsman
  Client Secret: [Press Enter]
  Username: Admin
  Password: *******
  &nbsp;
  Successfully fetched token via client credentials grant.
  Target <span>https</span>://YOUR-OPSMAN-FQDN/uaa/
</pre>
 Where:
 * `YOUR-OPSMANAGER-FQDN` is the fully qualified domain name of your Ops Manager installation.
1. Delete a user:
<pre class="terminal">$ uaac user delete USER-NAME</pre>
 Where:
 * `USER-NAME` is the username of the user you wish to delete.

## <a id="clients"></a> Add Ops Manager Client Accounts

The following sections describe how to create client accounts for Ops Manager automation using an admin account. 

### <a name="authenticate"></a> Log in to UAAC as an Admin

In order to configure a client, you must first log in to UAAC as an admin.

Use one of the following two methods to authenticate to UAAC:

* [Authenticate Using SAML or SSO](#saml)
* [Authenticate Using LDAP](#ldap)

### <a name="saml"></a> Authenticate Using SAML or SSO

If you're using SAML or SSO, authenticate to UAAC as an admin before creating a client.

To authenticate to UAAC, do the following:

1. Target your UAA server. 
 <pre class='terminal'>uaac target http<span>s</span>://YOUR-OPSMANAGER-FQDN/uaa</pre>
 Where:
 * `YOUR-OPSMANAGER-FQDN` is the fully qualified domain name of your Ops Manager installation.
1. Log in as an admin. 
 <pre class='terminal'>uaac token sso get</pre>
1. When prompted, type the Client ID and passcode. Leave the client secret blank.
 <pre class='terminal'>Client ID: opsman
 Client secret:
 Passcode (from <span>http</span>://YOUR-OPSMANAGER-FQDN/uaa/passcode): YOUR-UAA-PASSCODE</pre>
 
    Where:
    * `YOUR-OPSMANAGER-FQDN` is the fully qualified domain name of your Ops Manager installation.
    * `YOUR-UAA-PASSCODE` is the passcode with which you authenticate to UAA.

### <a name="ldap"></a> Authenticate Using LDAP

If you're not using SAML or SSO, authenticate to UAAC as an admin before creating a client.

To authenticate to UAAC, do the following:

1. Target your UAA server.
 <pre class='terminal'>uaac target http<span>s</span>://YOUR-OPSMANAGER-FQDN/uaa</pre>
 Where:
 * `YOUR-OPSMANAGER-FQDN` is the fully qualified domain name of your Ops Manager installation.
1. Log in as an admin.
 <pre class='terminal'>uaac token owner get</pre>
1. When prompted, type the Client ID, your username, and your password. Leave the client secret blank.
 <pre class='terminal'>Client ID: opsman
 Client secret: 
 User name:  admin 
 Password:  ***** </pre>
1. A message appears confirming that UAAC has `Successfully fetched token`.


### <a name="client-create"></a> Create a Client

After you authenticate to UAAC, create a client to manage automated components and tasks. 

To create a client, do the following: 

1. Create a client with role-based permissions, an ID, and an authentication secret using UAAC:
 <pre class='terminal'>$ uaac client add CLIENT-ID --authorized_grant_types client_credentials --authorities opsman.admin --secret CLIENT-SECRET</pre>
 Where: 
   * `CLIENT-ID` is the name of your client.
   * `CLIENT-SECRET` is the secret you use to authenticate to your client.

The `opsman.admin` authority referenced in the example above grant specific permissions to the client. You can choose which permissions you wish the client to have by assigning a different role.

For more information about Ops Manager roles and what they do, see [Understanding Roles in Ops Manager](../opsguide/config-rbac.html#about).

## <a id="pre-created-clients"></a>Add Pre-Created Clients

You can add a pre-created client to Ops Manager using the Ops Manager API. There are two methods to add a pre-created to Ops Manager. If you want to use a pre-created client, you can either:

* [Add a pre-created client before initial deployment](#pcc-initial-setup), or 
* [Add a pre-created client after deployment](#pcc-existing-deployment)

### <a id="pcc-initial-setup"></a>Add a Pre-Created Client Before Initial Deployment

Follow these steps to add a pre-created client before you deploy Ops Manager for the first time. If you do not already have the UAAC installed, run `gem install cf-uaac` on the command line.

This is how to add a pre-created client before you deploy Ops Manager:

1. Authenticate to and access the Ops Manager API by following the steps in [Using the Ops Manager API](./ops-man-api.html).
1. TK

if they want to use a pre-created client, they pass setup[precreated_client_secret] and that creates a UAA client for Ops Manager (not BOSH director) and then use that client to do whatever automation tasks they want to do.

### <a id="pcc-existing-deployment"></a>Add or Modify a Pre-Created Client for an Existing Deployment 

Follow these steps to add a pre-created client after you have already deployed Ops Manager. If you do not already have the UAAC installed, run `gem install cf-uaac` on the command line.

<p class="note"><strong>Note:</strong> </p>

This is how to add a pre-created client to an Ops Manager that has already been deployed:

1. Authenticate to and access the Ops Manager API by following the steps in [Using the Ops Manager API](./ops-man-api.html).
1. 

Second workflow is "I already have Ops Manager and UAAC configured, now I want to EITHER change the password of my existing PCC OR create a new one" --> [recreated_client[precreated_client_secret]



### <a id="">


For more information about the Ops Manager API, see [Using the Ops Manaager API](./ops-man-api.html).