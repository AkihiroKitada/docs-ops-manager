---
title: Installing Pivotal Cloud Foundry on AWS
owner: Ops Manager
---

<strong><%= modified_date %></strong>

This guide describes how to install [Pivotal Cloud Foundry](https://network.pivotal.io/products/pivotal-cf) (PCF) on Amazon Web Services (AWS).

## <a id='overview'></a> Overview 

You can install PCF on AWS with either the Pivotal Application Service (PAS) or Pivotal Container Service (PKS) runtime. There are resource requirements specific to each runtime. Ensure you meet the requirements for your runtime and the requirements specific to GCP before installing PCF on GCP.

## <a id="requirements"></a> Requirements

This section lists the following resource requirements for installing PCF on GCP:

* General PCF resource requirements. See [PCF Resource Requirements](#general-requirements).
* AWS-specific resource requirements. See [AWS Resource Requirements](#aws-requirements).

This section lists PCF resource requirements for installing PCF on GCP. It includes general PCF resource requirements for both the PAS and PKS runtimes.

View one of the following, depending on your PCF runtime:

* PAS-specific PCF resource requirements. See [PAS Resource Requirements](#pas).
* PKS-specific PCF resource requirements. See [PKS Resource Requirements](#pks).

#### <a id="pas"></a> PAS Resource Requirements

The following are general resource requirements for deploying and managing a PCF deployment with Ops Manager and PAS:

<%= partial "requirements" %>

### <a id='pks'></a> PKS Resource Requirements

For PKS-specific resource requirements, see [GCP Prerequisites and Resource Requirements](https://docs.pivotal.io/runtimes/pks/gcp-requirements.html).

### <a id="aws-requirements"></a> AWS Resource Requirements

The following are the minimum resource requirements for maintaining a high-availability (HA) [Pivotal Cloud Foundry](https://network.pivotal.io/products/pivotal-cf) (PCF) deployment with Ops Manager and Pivotal Application Service (PAS) on Amazon Web Services infrastructure:

<p class="note"><strong>Note:</strong> These requirements assume you are using an external database and external file storage.</p>

* 3 Elastic Load Balancers
* 1 Relational Database Service. As a minimum, Pivotal recommends using a db.m3.xlarge instance with at least 100&nbsp;GB of allocated storage.
* 5 S3 Buckets
* EC2 instances (VMs):
  - **PAS**: At a minimum, a new AWS deployment requires the following VMs for PAS:
<table border="1" class="nice">
  <tr>
    <th>AWS Requirements</th>
    <th>VM Name</th>
    <th>VM Type</th>
    <th>Default VM Count</th>
    <th>Required or Optional VM</th>
  </tr><tr>
    <th rowspan=21>PAS</th>
    <td>NATS</td>
    <td>t2.micro</td>
    <td>2</td>
    <td>Required</td>
  </tr><tr>
    <td>File Storage</td>
    <td>m4.large</td>
    <td>1</td>
    <td>Optional</td>
  </tr><tr>
    <td>MySQL Proxy</td>
    <td>t2.micro</td>
    <td>2</td>
    <td>Optional</td>
  </tr><tr>
    <td>MySQL Server</td>
    <td>r4.large</td>
    <td>3</td>
    <td>Optional</td>
  </tr><tr>
    <td>Backup Restore Node</td>
    <td>t2.micro</td>
    <td>1</td>
    <td>Optional</td>
  </tr><tr>
    <td>Diego BBS</td>
    <td>t2.micro</td>
    <td>3</td>
    <td>Required</td>
  </tr><tr>
    <td>UAA</td>
    <td>m4.large</td>
    <td>2</td>
    <td>Required</td>
  </tr><tr>
    <td>Cloud Controller</td>
    <td>m4.large</td>
    <td>2</td>
    <td>Required</td>
  </tr><tr>
    <td>HAProxy</td>
    <td>t2.micro</td>
    <td>0</td>
    <td>Optional</td>
  </tr><tr>
    <td>Router</td>
    <td>t2.micro</td>
    <td>3</td>
    <td>Required</td>
  </tr><tr>
    <td>MySQL Monitor</td>
    <td>t2.micro</td>
    <td>1</td>
    <td>Optional</td>
  </tr><tr>
    <td>Clock Global</td>
    <td>t2.medium</td>
    <td>2</td>
    <td>Required</td>
  </tr><tr>
    <td>Cloud Controller Worker</td>
    <td>t2.micro</td>
    <td>2</td>
    <td>Required</td>
  </tr><tr>
    <td>Diego Brain</td>
    <td>t2.small</td>
    <td>3</td>
    <td>Required</td>
  </tr><tr>
    <td>Diego Cell</td>
    <td>r4.xlarge</td>
    <td>3</td>
    <td>Required</td>
  </tr><tr>
    <td>Loggregator Traffic Controller</td>
    <td>t2.micro</td>
    <td>2</td>
    <td>Required</td>
  </tr><tr>
    <td>Syslog Adapter</td>
    <td>t2.micro</td>
    <td>3</td>
    <td>Required</td>
  </tr><tr>
    <td>Syslog Scheduler</td>
    <td>t2.micro</td>
    <td>2</td>
    <td>Required</td>
  </tr><tr>
    <td>Doppler Server</td>
    <td>m4.large</td>
    <td>3</td>
    <td>Required</td>
  </tr><tr>
    <td>TCP Router</td>
    <td>t2.micro</td>
    <td>0</td>
    <td>Optional</td>
  </tr><tr>
    <td>CredHub</td>
    <td>r4.large</td>
    <td>2</td>
    <td>Optional</td>
  </tr><tr>
    <th rowspan=2>Ops Manager</th>
    <td>BOSH Director</td>
    <td>m4.large</td>
    <td>1</td>
    <td>Required</td>
  </tr>
</table>
By default, PAS deploys the number of VM instances required to run a highly available configuration of PCF. If you are deploying a test or sandbox PCF that does not require HA, you can scale down the number of instances in your deployment. For information about the number of instances required to run a minimal, non-HA PCF deployment, see [Scaling PAS](../opsguide/scaling-ert-components.html).
  - **Small Footprint PAS**: To run Small Footprint PAS, a new AWS deployment requires:  
<table id='aws-requirements' border="1" class="nice">
  <tr>
  	<th>AWS Requirements</th>
    <th>VM Name</th>
    <th>VM Type</th>
    <th>Default VM Count</th>
    <th>Minimum HA VM Count</th>
    <th>Required or Optional VM</th>
  </tr><tr>
    <th rowspan=9>Small Footprint PAS</th>
    <td>Compute</td>
    <td>r4.xlarge</td>
    <td>1</td>
    <td>3</td>
    <td>Required</td>
  </tr><tr>
    <td>Control</td>
    <td>r4.xlarge</td>
    <td>1</td>
    <td>2</td>
    <td>Required</td>
  </tr><tr>
    <td>Database</td>
    <td>r4.large</td>
    <td>1</td>
    <td>3</td>
    <td>Required</td>
  </tr><tr>
    <td>Router</td>
    <td>t2.micro</td>
    <td>1</td>
    <td>3</td>
    <td>Required</td>
  </tr><tr>
    <td>File Storage</td>
    <td>m4.large</td>
    <td>1</td>
    <td>N/A</td>
    <td>Optional</td>
  </tr><tr>
    <td>Backup Restore Node</td>
    <td>t2.micro</td>
    <td>1</td>
    <td>1</td>
    <td>Optional</td>
  </tr><tr>
    <td>MySQL Monitor</td>
    <td>t2.micro</td>
    <td>1</td>
    <td>1</td>
    <td>Optional</td>
  </tr><tr>
    <td>HAProxy</td>
    <td>t2.micro</td>
    <td>0</td>
    <td>2</td>
    <td>Optional</td>
  </tr><tr>
    <td>TCP Router</td>
    <td>t2.micro</td>
    <td>0</td>
    <td>1</td>
    <td>Optional</td>
  </tr><tr>
  	<th rowspan=2>Ops Manager</th>
    <td>BOSH Director</td>
    <td>m4.large</td>
    <td>1</td>
    <td>N/A</td>
    <td>Required</td>
  </tr>
</table>

## <a id="prerequisites"></a> Prerequisites

To install PCF on GCP, you must do the following:

* Create an AWS account that can accommodate the minimum resource requirements for a PCF installation. For more information about the resoure requirements, see [Requirements](#requirements).

* Configure your AWS account with the appropriate AWS region. For more information about selecting the correct region for your deployment, see [Region and Availability Zone Concepts](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-regions-availability-zones.html#concepts-regions-availability-zones) in the AWS documentation.

* Install the AWS CLI. Configure the AWS CLI with the user credentials that have admin access to your AWS account. To download the AWS CLI, see [AWS CLI](https://aws.amazon.com/cli/).

* Increase or remove the VM instance limits in your AWS account. Installing PCF requires more than the default 20 concurrent instances.

* Configure an AWS EC2 key pair to use with your PCF deployment. For more information, see [Creating an EC2 Key Pair](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-console-create-keypair.html) in the AWS documentation.

* Register a wildcard domain for your PCF installation. You need this registered domain when configuring your SSL certificate and Cloud Controller. 
For more information, see [SSL/TLS Certificates for Classic Load Balancers](http://docs.aws.amazon.com/ElasticLoadBalancing/latest/DeveloperGuide/ssl-server-cert.html#create-cert) in the AWS documentation.

* Create an SSL certificate for your PCF domain. For more information, see the [AWS documentation about SSL certificates](http://docs.aws.amazon.com/ElasticLoadBalancing/latest/DeveloperGuide/ssl-server-cert.html).
  <p class="note"><b>Note: </b>To deploy PCF to a production environment, you must obtain a certificate from a certificate authority. Pivotal recommends using a self-signed certificate generated by Ops Manager for development and testing purposes only.</p> 

## <a id="resources"></a>Additional Resources

The following are additional resources related to installing PCF on AWS:

* For information about AWS identity and access management, see [What is IAM?](http://docs.aws.amazon.com/IAM/latest/UserGuide/introduction.html) in the AWS documentation.

* For information about users, groups, and roles in AWS, see [Identities (Users, Groups, and Roles)](http://docs.aws.amazon.com/IAM/latest/UserGuide/id.html) in the AWS documentation.

* For best practices for managing IaaS users and permissions, see [AWS credential documentation](http://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp.html) in the AWS documentation

* For recommendations on how to create and scope AWS accounts for PCF, see [AWS Permissions Guidelines](./aws-iaas-user-roles.html).

* For more information about certificate requirements for installing PCF, see [Certificate Requirements](../adminguide/securing-traffic.html#certtypes).